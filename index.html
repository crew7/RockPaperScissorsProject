<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
    <link rel="stylesheet" href="stylesheet.css">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <main>
        <header>
            <h1>Rock Paper Scissors</h1>
            <h2>Chose your weapon</h2>
            <h3>Best of 5</h3>
        </header>

        <div class="buttonContainers">
            <button id="rockButton">Rock</button>
            <button id="paperButton">Paper</button>
            <button id="scissorsButton">Scissors</button>
        </div>

        <div class="gameResultsContainer">
            <div class="gameResultsHeader">
                <h2>Games Results</h2>
                <div id="gameResults"></div>
            </div>
        </div>

        <div id="scoreCounter"></div>
    </main>





    <script>

        function computerPlay() {
            let computerChoice = Math.floor(Math.random()*3) + 1;
            switch (computerChoice) {
                case 1:
                    computerChoice = 'Rock';
                    break;
                case 2:
                    computerChoice = 'Paper';
                    break;
                case 3:
                    computerChoice = 'Scissors';
            }
            return computerChoice
        }

        function playRound(playerSelection, computerSelection) {
            playerSelection = playerSelection.toLowerCase()

            if (playerSelection === 'rock' && computerSelection === 'Paper') {
                gameResultsMessage = document.createElement('p');
                gameResultsMessage.textContent = 'You Lose! Paper beats Rock'
                touchGameResults.appendChild(gameResultsMessage);

                return 'lose';

            } else if (playerSelection === 'paper' && computerSelection === 'Scissors') {
                gameResultsMessage = document.createElement('p');
                gameResultsMessage.textContent = 'You Lose! Scissors beats Paper'
                touchGameResults.appendChild(gameResultsMessage);

                return 'lose';

            } else if (playerSelection === 'scissors' && computerSelection === 'Rock') {
                gameResultsMessage = document.createElement('p');
                gameResultsMessage.textContent = 'You Lose! Rock beats Scissors'
                touchGameResults.appendChild(gameResultsMessage);

                return 'lose';
            }

            if (playerSelection === 'rock' && computerSelection === 'Scissors') {
                gameResultsMessage = document.createElement('p');
                gameResultsMessage.textContent = 'You Win! Rock beats Scissors'
                touchGameResults.appendChild(gameResultsMessage);

                return 'win';

            } else if (playerSelection === 'paper' && computerSelection === 'Rock') {
                gameResultsMessage = document.createElement('p');
                gameResultsMessage.textContent = 'You Win! Paper beats Rock'
                touchGameResults.appendChild(gameResultsMessage);

                return 'win';

            } else if (playerSelection === 'scissors' && computerSelection === 'Paper') {
                gameResultsMessage = document.createElement('p');
                gameResultsMessage.textContent = 'You Win! Scissors beats Paper'
                touchGameResults.appendChild(gameResultsMessage);

                return 'win';
            } 
            
            if (playerSelection === 'rock' && computerSelection === 'Rock') {
                
                gameResultsMessage = document.createElement('p');
                gameResultsMessage.textContent = 'You tied! Rock ties with Rock'
                touchGameResults.appendChild(gameResultsMessage);

                return 'tie';

            } else if (playerSelection === 'paper' && computerSelection === 'Paper') {
                gameResultsMessage = document.createElement('p');
                gameResultsMessage.textContent = 'You tied! Paper ties with Paper'
                touchGameResults.appendChild(gameResultsMessage);

                return 'tie';

            } else if (playerSelection === 'scissors' && computerSelection === 'Scissors') {
                gameResultsMessage = document.createElement('p');
                gameResultsMessage.textContent = 'You tied! Scissors ties with Scissors'
                touchGameResults.appendChild(gameResultsMessage);

                return 'tie';
            }


            else {
                return 'You didn\'t click either rock, paper or scissors.'
            }
        }

        function scoreConverter(roundData) {
            if (winCounter + loseCounter + tieCounter > 5) {
                winCounter = 0;
                loseCounter = 0;
                tieCounter = 0;
                touchGameResults.textContent = '';
                return;
            }

            if (winCounter + loseCounter + tieCounter < 5)
                if (roundData === 'win') {
                    ++winCounter;
                } else if (roundData === 'lose') {
                    ++loseCounter;
                } else if (roundData === 'tie') {
                    ++tieCounter;
                }

            if (winCounter + loseCounter + tieCounter === 5) {
                if (winCounter > loseCounter) {
                    console.log('you won the game')
                } else if (loseCounter > winCounter) {
                    console.log('you lost the game')
                } else {
                    console.log('you tied the game')
                }
                ++tieCounter; /* The point of this is to loop back to a new game */
            }
        }
        let winCounter = 0;
        let loseCounter = 0;
        let tieCounter = 0;
        let clearCounter = 0;
        
        const touchRockButton = document.querySelector('#rockButton');
        const touchPaperButton = document.querySelector('#paperButton');
        const touchScissorsButton = document.querySelector('#scissorsButton');
        const touchGameResults = document.querySelector('#gameResults');
        const arrayOfButtons = document.querySelectorAll('button')

        arrayOfButtons.forEach( (gameButton) => {
            gameButton.addEventListener('click', (buttonClick) => {
                buttonClick.target.classList.add('buttonClickNotif');
                setTimeout( () => buttonClick.target.classList.remove('buttonClickNotif'), 100 )
            })
        })

        touchRockButton.addEventListener('click', () => {
        const computerSelection = computerPlay();
        const winner = playRound('rock', computerSelection);

        scoreConverter(winner);
        })

        touchPaperButton.addEventListener('click', () => {
        const computerSelection = computerPlay();
        const winner = playRound('paper', computerSelection);

        scoreConverter(winner);
        })

        touchScissorsButton.addEventListener('click', () => {
        const computerSelection = computerPlay();
        const winner = playRound('scissors', computerSelection);  

        scoreConverter(winner);
        })

        

    </script>
</body>
</html>